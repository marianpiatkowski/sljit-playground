# SLJIT Playground

Some quick notes (in German: Mit der hei√üen Feder geschrieben)...

## Installation

Basically

```bash
cmake -DSLJIT_ROOT=<pathtosljitsource> <pathtosource>
```
To include SLJIT in a CMake project, just take the files
`cmake/modules/FindSLJIT.cmake` and `cmake/modules/AddSLJITFlags.cmake`.

## References

- [SLJIT](https://github.com/zherczeg/sljit) or [my fork](https://github.com/marianpiatkowski/sljit).

  Examples can be found in the directory `doc/tutorial`.
  You might also find help in the tests folder `test_src`.

- [SLJIT tutorial](http://ftp.jaist.ac.jp/pub/NetBSD/NetBSD-current/src/sys/external/bsd/sljit/dist/doc/tutorial/sljit_tutorial.html) -
  some explanation to the example programs to be found `doc/tutorial` (see above), source code, however, not up to date.

- [Kinx Library](https://linuxtut.com/kinx-library-jit-compiler-library-a237f/)

  JIT Compiler Library likely being inspired by SLJIT.
  Git repository of kinx can be found at the following [link](https://github.com/Kray-G/kinx).
  Examples on how to use the JIT functionality can be found on the webpage above,
  or in the directory `examples` of the Git repository (or just search for the term `using Jit;`).

## Examining Assembler code generated by SLJIT

Assembler code generated by SLJIT can be examined using the function
`static void dump_code(void* code, sljit_uw len);` which is used in the examples here.
Note that this is only supported for `x86_64` or `x86_32`.
You may also want to adjust the filename where the output is written.

Post to the calls
```cpp
code = sljit_generate_code(C);
len = sljit_get_generated_code_size(C);
```
place the following line of code: `dump_code(code, len);`

In the examples here this is by default turned off. To enable via CMake for a particular executable,
add the following lines of code to `CMakeLists.txt`
```cmake
target_compile_definitions(
  fibonacci
  PUBLIC
  DUMP_SLJIT_CODE
  )
```
